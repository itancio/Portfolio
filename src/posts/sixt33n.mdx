---
title: 'Sixt33n'
abstract: 'This is a voice controlled car project for 16B class at UC Berkeley.'
keywords: ['c++', 'arduino', 'soldering', 'circuit', 'op amps', 'digital-to-analog converter', 'svd', 'pca']
categories: ['Make']
date: '2021-05-07'
banner: /static/hello-world-banner.jpg
---

### Phase 1: Circuits
The laboratory exercise involves interfacing a mic board with a Launchpad, 
requiring students to calibrate the analog-to-digital converter (ADC) on the Launchpad 
to correctly interpret the mic board's output. Calibration includes adjusting the `oscope.ino` 
file and carefully connecting the Launchpad to the mic board with precise resistor placement 
to establish the conversion factor. The mic board must then be tuned to capture audio signals, 
specifically a pure tone between 3000-4000 Hz, adjusting the gain to achieve a desired peak-to-peak 
voltage. Furthermore, students are tasked with constructing a low-pass filter with a 2500 Hz cutoff 
to isolate normal conversational voice frequencies, followed by setting up motor controller circuits 
using BJTs and diodes for directional motor control. Finally, students are instructed to assemble 
their SIXT33N car, test individual components, and document their processes for a project report, 
ensuring all circuits work correctly and understanding their roles in the overall system. 
This comprehensive setup serves as a precursor to a more complex task of controlling 
the car via audio commands in subsequent labs.

### Phase 2: System Identification
Phase 2 of the EECS 16B lab focuses on system identification for a robotic car project. 
Students begin by installing encoders on their vehicles to measure wheel rotation. 
After ensuring the sensors work correctly without noise interference, the car is switched 
from wall power to battery operation for mobility. Data collection involves running the car 
across different speeds to record wheel velocities, then applying a least-squares regression 
analysis to estimate parameters for each wheel's operation (theta and beta). This analysis is critical 
for understanding how the car responds to different PWM inputs and for determining an operational point 
where both wheels can turn at the same velocity for straight movement. Students also verify the microphone 
board's functionality, crucial for later labs involving voice control. The lab concludes with students 
presenting their findings to a TA, discussing the importance of the collected data, the process 
of finding theta and beta, and the rationale behind separately modeling each wheel. 
All data collected is saved for future reference.

### Phase 3: Controls
In the EECS16B lab, students develop an open-loop control system using a model established 
in previous labs, simulate its performance including potential errors and noise, 
and calculate 'jolt' values to initiate motion. This system is then programmed into a Launchpad. 
Subsequently, a closed-loop control system is introduced to address the open-loop model's limitations 
by incorporating feedback, enhancing the car's ability to travel in the desired direction 
despite imperfections and disturbances. After designing the control system and conducting simulations 
to select optimal gain values, the closed-loop system is implemented and fine-tuned on the Launchpad. 
Finally, a comparison between the open and closed-loop systems highlights the significance of feedback 
for maintaining control, as the car performs better with the closed-loop system in place.

### Phase 4: SVD/ PCA
Phase 4 of the EECS16B SIXT33N project involves students implementing a voice recognition system 
for a robot car using SVD and PCA. The process starts with setting up and calibrating 
the Launchpad and microphone to accurately capture voice commands. Data is collected and preprocessed, 
which includes enveloping to highlight the waveform shape and aligning audio snippets.

Using PCA, students analyze the preprocessed data to identify principal components 
that best cluster the voice commands. They find centroids for each cluster to use for classification. 
The system's effectiveness is tested with a new dataset to ensure the classifier can generalize 
and accurately recognize commands, aiming for at least 80% accuracy.

The project teaches students about the preprocessing steps in machine learning, feature extraction, 
dimensionality reduction, and the practical application of these concepts to build a working voice 
recognition system for a robotic car.

### Phase 5: Advanced Controls
Phase 5 of the SIXT33N Project focuses on refining the control system of a robotic car 
to accurately respond to voice commands and execute turns. The phase begins by implementing 
a voice command recognition system on the Launchpad using Principal Component Analysis (PCA) 
to classify live audio signals into commands. To enable turning, the project analyzes the relationship 
between turn radius and wheel velocities, leading to an adjusted closed-loop control model. 
The students then implement this model on the Launchpad, incorporating preprogrammed commands 
for turning and straight driving. If necessary, a correction function is introduced to account 
for mechanical imperfections that prevent the car from driving straight, ensuring the car can follow 
a precise path as dictated by voice commands. This phase combines live audio processing with 
advanced control techniques to achieve a responsive and accurate autonomous vehicle.

### Phase 6: Integration
The SIXT33N Project's final phase involves integrating various components into a cohesive 
program on the Launchpad, allowing the autonomous vehicle to execute specific voice commands 
like moving straight or turning. This integration phase is encapsulated in the sketch 
`integration.ino`, which requires filling out predefined code sections, particularly 
for wheel control and voice command recognition. The car operates in two primary modes: 
listening for voice commands (MODE_LISTEN) and driving based on recognized commands (MODE_DRIVE). 
Students must transfer their prior work on PCA vectors and control schemes into the Launchpad 
sketch, tweaking parameters like turn radius and drive durations to ensure accurate performance. 
A successful demo requires SIXT33N to follow a sequence of voice commands, and the project 
concludes with a comprehensive lab report summarizing the semester's work. The report 
must be submitted by a specified deadline, and there's an opportunity for creative enhancements 
in a design contest.

Reflecting on the project, the team acknowledged the importance of integration between software and hardware, 
circuit design, signal processing, 
and the impact of design choices on the difficulty of troubleshooting. 
The project highlighted the significance of meticulous data collection, as small errors could have a compounding effect 
on the overall system. 

