---
title: 'Sixt33n'
abstract: 'This project presents the integration of intricate software algorithms and robust hardware systems 
    to construct a voice-activated autonomous vehicle. It underscores the interplay of advanced control systems, 
    nuanced signal processing, and the principles of machine learning, culminating in a dynamic live demonstration.'
keywords: ['c++', 'arduino', 'soldering', 'circuit', 'op amps', 'digital-to-analog converter', 'svd', 'pca']
categories: ['Make']
date: '2021-05-07'
banner: /static/sixt33n/sixt33n.png
---

The SIXT33N project undertakes the ambitious task of creating a voice-activated car robot, 
merging multifaceted components such as power systems, audio processing circuits, and control mechanisms. 
It intricately combines a reliable power supply, a sensitive mic board, dynamic gain and buffering systems, 
and meticulous drift elimination with sophisticated variable gain amplifiers. 

The project also intricately weaves filtering techniques for signal clarity and employs PCA for 
command classification, alongside implementing precise open and closed-loop 
control models for accurate navigation.

Here are the components for this project:

### Mic Board
The microphone circuit on the Mic Board is organized into four primary segments: 
Microphone Gain, Buffer, Microphone Drift Removal, and Variable Gain Amplifier. 
These segments streamline the processing of incoming audio signals within the circuit. 
The microphone itself functions as a variable current source, paired with ideal operational amplifiers 
(op-amps) that allow all current to pass exclusively through the connected resistor, 
thereby setting the voltage at the positive terminal as a function of Vdd, Vss, 
and the current through a 1000-ohm resistor.

**Microphone Gain:**
This stage amplifies the variable amplitude signals detected by the microphone, using a design 
that mimics a variable current source.
![Thumbnail](/static/sixt33n/sixt33n_amps.png)

**Buffer:**
The buffer stage employs a unity buffer that isolates the op-amp and capacitor from the microphone, 
ensuring no additional gain at this juncture.

**Microphone Drift Removal:**
A coupling capacitor functions here as a high-pass filter with a very low corner frequency, 
effectively eliminating low-frequency drifts such as noise and DC offset from the microphone signal.

**Variable Gain Amplifier and Biasing Circuit:**
Biasing Circuits OS1 and OS2 form part of the variable gain amplifier stage to refine 
the signal analysis. OS1 centers the signal voltage between 0V and 3.3V to offset the DC component, 
while OS2 shifts the level, setting a 1.65V reference for the non-inverting op-amps and 
preventing the amplification of the DC offset. The final element, a non-inverting op-amp, 
allows for adjustable gain via its corresponding potentiometer.
![Thumbnail](/static/sixt33n/sixt33n_micboard.png)

### Filtering Process
A band-pass filter was implemented to effectively mitigate aliasing noise, 
leveraging a composite of second-order low and high pass filters. 
This combination strictly retains signals within the voice command frequency spectrum 
while discarding extraneous noise.

**Buffers and Filter Integrity:**
Buffers play a pivotal role in preserving the pure band-pass filter's transfer function 
by providing necessary isolation between the high pass and low pass filter stages.

**Filter Construction Specifics:**
Detailed component values and formulae underpinning the construction of the filter are elaborated 
in the following section, providing insight into the methodological approach adopted for optimal filtering.

**Gain and Frequency Response Calculation:**
The cutoff frequencies were deduced using the standard formula 
`\( f = \frac{1}{2\pi RC} \)`
A low pass filter with a 5100-ohm resistor and 10-nanofarad capacitor culminates in a 3120 Hz cutoff, 
while a high pass filter composed of a 2000-ohm resistor and 100-nanofarad capacitor 
establishes a 795 Hz cutoff. 

### Controls
**Voice Command Selection and Articulation:**
For the autonomous vehicle project, the chosen voice commands included "tac" for a distant straight 
trajectory, "flamingo" to signal a left turn, "inspire" for a shorter straight path, and "crescendo" 
to initiate a right turn. The effectiveness of these commands was grounded in their distinct syllabic 
structures and the emphasis placed during articulation. Adjustments were made to avoid word similarities, 
such as removing "Maharbiz" and "Jaijeet," which caused classification conflicts due to their acoustic 
resemblance to "flamingo" and "inspire."

**Data Preprocessing for PCA and K-Means:**
The preprocessing phase was critical for refining the Principal Component Analysis (PCA) 
and K-Means clustering. By examining time-domain signals, we set thresholds to isolate relevant 
signal segments, effectively eliminating outliers. Utilizing the first two principal components, 
we enhanced the accuracy of the K-Means classification.

**Control Systems: Open Loop and Closed Loop Models:**
The control system was bifurcated into open and closed-loop models. 
The open-loop model operated purely on empirically derived motor parameters and desired velocity inputs, 
adhering to predefined control equations. Conversely, the closed-loop model incorporated a 'delta' variable 
to account for discrepancies in wheel travel distances, harnessing feedback mechanisms to dynamically 
correct trajectory deviations, substantiated by its own set of control equations. 
This approach rectified errors from mechanical inconsistencies, contributing to the vehicle's precise navigation.

### Refinement of Controller Parameters
For the vehicle's controller system, the eigenvalue associated with the delta term was determined 
to be within the range of (-1, 1), signifying a stable control model in our discrete time setting. 
The constants kL and kR, essential for the feedback mechanism, were meticulously adjusted through 
trial and error, ultimately settling on kL = 0.9 and kR = 0.7 for optimal stability and response.

### Enabling Maneuverability
To facilitate the vehicle's turning capability, a new formulation of the delta variable was introduced, 
incorporating the wheelbase, denoted as l, and the desired turn radius, r. This revised model prompted 
asymmetric power allocation to the motorsâ€”thus inducing a turn. The revised delta, 
differing from the zero value used for straight-line travel, is described by the following relationship: 
delta[k] = (v* * l) / (3 * r * k), which quantitatively relates the car's speed, wheelbase, 
and turn radius to the required change in wheel distance for a turn.
![Thumbnail](/static/sixt33n/sixt33n.png)

### Reflection
Reflecting on the project, the team acknowledged the importance of integration between software and hardware, 
circuit design, signal processing, 
and the impact of design choices on the difficulty of troubleshooting. 
The project highlighted the significance of meticulous data collection, as small errors could have a compounding effect 
on the overall system. 